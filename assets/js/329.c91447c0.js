(window.webpackJsonp=window.webpackJsonp||[]).push([[329],{623:function(t,e,s){"use strict";s.r(e);var a=s(10),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"how-to-recover-a-swap-that-failed-in-atomicdex-mobile-using-desktop"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-recover-a-swap-that-failed-in-atomicdex-mobile-using-desktop"}},[t._v("#")]),t._v(" How to recover a swap that failed in AtomicDEX mobile using Desktop")]),t._v(" "),e("p",[t._v("If for any reason, you don't want to/can't recover a stuck/timed out/failed swap in AtomicDEX mobile and wants to use the CLI on a desktop, follow this guide.")]),t._v(" "),e("ul",[e("li",[t._v('First, export the log file from your AtomicDEX mobile (Settings -> "Share log File") and transfer it to your Desktop.')]),t._v(" "),e("li",[t._v("Follow the instructions in "),e("RouterLink",{attrs:{to:"/qa/extract-swap-data-atomicDEX-log.html"}},[t._v("this linked guide")]),t._v(" to extract the swap data from the log file into a format usable by "),e("code",[t._v("mm2")])],1),t._v(" "),e("li",[t._v('It should create two directories named "MAKER" and "TAKER" and files named '),e("code",[t._v("<uuid>.json")]),t._v(" in the appropriate directory. "),e("code",[t._v("uuid")]),t._v(" is the swap id from the AtomicDEX mobile app")]),t._v(" "),e("li",[t._v('Find the file named after your stuck swap\'s id and save it in a accessible location. Also note if it was in the directory named "MAKER" or "TAKER"')]),t._v(" "),e("li",[t._v("Follow the instructions in "),e("RouterLink",{attrs:{to:"/qa/atomicDEX-quickstart.html"}},[t._v("this linked guide")]),t._v(" to download, configure and setup AtomicDEX on your desktop. When creating the file "),e("code",[t._v("MM2.json")]),t._v(" as described in the guide, use the seed words from AtomicDEX mobile as the value for the key "),e("code",[t._v('"passphrase"')])],1),t._v(" "),e("li",[t._v("Once "),e("code",[t._v("mm2")]),t._v(" is up and running, open a new terminal window and export the "),e("code",[t._v("rpc_password")]),t._v(" as value to the environment variable named "),e("code",[t._v("userpass")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("userpass")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<value of rpc_password from MM2.json here>"')]),t._v("\n")])])]),e("ul",[e("li",[t._v("Stop "),e("code",[t._v("mm2")]),t._v(" by issuing the "),e("code",[t._v("stop")]),t._v(" command in the same terminal")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--url")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:7783"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("method"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("stop"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("userpass"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$userpass")]),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}"')]),t._v("\n")])])]),e("ul",[e("li",[t._v("Navigate to the directory where "),e("code",[t._v("mm2")]),t._v(" is located . You should find a directory named "),e("code",[t._v("DB")]),t._v(". Inside it, there should be a directory with a long hex (similar to "),e("code",[t._v("514fa660fa9976c87bb08e5636653ac75be9f606")]),t._v(') as its name. Navigate into it, then into "SWAPS", then "MY".\n'),e("ul",[e("li",[t._v("the directory structure should look similar to "),e("code",[t._v("DB/514fa660fa9976c87bb08e5636653ac75be9f606/SWAPS/MY")])])])]),t._v(" "),e("li",[t._v("now, place the swap file in the above mentioned directory")]),t._v(" "),e("li",[t._v("Now start "),e("code",[t._v("mm2")]),t._v(" again using the command")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("stdbuf "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-oL")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" ./mm2\n")])])]),e("ul",[e("li",[t._v("Enable the coins involved in the swap using the "),e("a",{attrs:{href:"https://developers.atomicdex.io/basic-docs/atomicdex/atomicdex-api.html#electrum",target:"_blank",rel:"noopener noreferrer"}},[t._v("electrum"),e("OutboundLink")],1),t._v(" command")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--url")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:7783"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("userpass"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$userpass")]),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("method"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("electrum"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("coin"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("RICK"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("servers"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":[{"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("url"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("electrum1.cipig.net:10017"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("},{"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("url"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("electrum2.cipig.net:10017"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("},{"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("url"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("electrum3.cipig.net:10017"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}]}"')]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("ul",[e("li",[t._v("replace the value of the parameter "),e("code",[t._v('"coin"')]),t._v(" in the above command with the coin name of your choosing")]),t._v(" "),e("li",[t._v("find the electrum server addresses for the coin you are enabling from "),e("a",{attrs:{href:"https://github.com/jl777/coins/tree/master/electrums",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jl777/coins/tree/master/electrums"),e("OutboundLink")],1),t._v(" and replace the values of the parameter named "),e("code",[t._v('"url"')]),t._v(" in the above command with the appropriate values")]),t._v(" "),e("li",[t._v("you have to enable both the coins involved in the stuck swap")])])]),t._v(" "),e("ul",[e("li",[t._v("The above command outputs a response similar to")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"coin"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RICK"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"address"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RQNUR7qLgPUgZxYbvU9x5Kw93f6LU898CQ"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"balance"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"locked_by_swaps"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"required_confirmations"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"result"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ul",[e("li",[t._v("Make sure the address and balance in the above response match the values shown in AtomicDEX mobile. If the address does not match, the "),e("code",[t._v('"passphrase"')]),t._v(" (seed words) in "),e("code",[t._v("MM2.json")]),t._v(" is incorrect. Stop "),e("code",[t._v("mm2")]),t._v(", delete the directory named "),e("code",[t._v("DB")]),t._v(", correct the passphrase and repeat all the steps from before. If the balance is "),e("code",[t._v("0")]),t._v(", either the electrum server's addresses you are using are incorrect or your connection might have an issue. Likely a firewall is blocking it.")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Caution")]),t._v(" "),e("p",[t._v("Don't delete the DB if you have been using the "),e("code",[t._v("mm2")]),t._v(" on your desktop before opening this guide. It contains information on your past/ongoing/stuck swaps. Deleting it may cause you to lose access to your locked coins. Instead of deleting the entire DB, simply delete the directory inside the DB that corresponds to the wrong "),e("code",[t._v('"passphrase"')]),t._v(" value. It should be the direcory that was created/modified most recently")])]),t._v(" "),e("ul",[e("li",[t._v("Once you are sure that both the coins have been enabled using the "),e("code",[t._v("electrum")]),t._v(" method and the addresses and balances match the values in the AtomicDEX mobile, you are ready to recover the swap. Issue the "),e("code",[t._v("recover_funds_of_swap")]),t._v(" command with the swap id as an argument")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--url")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:7783"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{'),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("userpass"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$userpass")]),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("method"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("recover_funds_of_swap"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("params"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":{"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("uuid"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("<swap id of the stuck swap here>"),e("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('}}"')]),t._v("\n")])])]),e("ul",[e("li",[t._v("Replace the text "),e("code",[t._v("<swap id of the stuck swap here>")]),t._v(" with the swap id of the stuck swap.")]),t._v(" "),e("li",[t._v("You should see a response similar to the following, if it was successful")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"result"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"action"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RefundedMyPayment"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"coin"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RICK"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tx_hash"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"696571d032976876df94d4b9994ee98faa870b44fbbb4941847e25fb7c49b85d"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tx_hex"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0400008085202f890113591b1feb52878f8aea53b658cf9948ba89b0cb27ad0cf30b59b5d3ef6d8ef700000000d8483045022100eda93472c1f6aa18aacb085e456bc47b75ce88527ed01c279ee1a955e85691b702201adf552cfc85cecf588536d5b8257d4969044dde86897f2780e8c122e3a705e40120576fa34d308f39b7a704616656cc124232143565ca7cf1c8c60d95859af8f22d004c6b63042555555db1752102631dcf1d4b1b693aa8c2751afc68e4794b1e5996566cfc701a663f8b7bbbe640ac6782012088a9146e602d4affeb86e4ee208802901b8fd43be2e2a4882102031d4256c4bc9f99ac88bf3dba21773132281f65f9bf23a59928bce08961e2f3ac68ffffffff0198929800000000001976a91405aab5342166f8594baf17a7d9bef5d56744332788ac0238555d000000000000000000000000000000"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Please contact us in the "),e("a",{attrs:{href:"https://komodoplatform.com/discord",target:"_blank",rel:"noopener noreferrer"}},[t._v("Discord server"),e("OutboundLink")],1),t._v(" if any step is unclear. When in doubt, ask first before executing a command.")])])}),[],!1,null,null,null);e.default=n.exports}}]);